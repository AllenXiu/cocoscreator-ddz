{"version":3,"sources":["../../../../assets/Script/assets/Script/playing.js"],"names":["PokerObj","require","pokerTypes","PlayerType","cc","Enum","left","right","player","dipai","shoupai","Class","extends","Component","properties","poker","Prefab","allPokers","playerPokers","dipaiPokers","leftPokersOut","rightPokersOut","playerPokersOut","pokerSpriteFrameMap","default","visible","leftReady","Label","rightReady","playerReady","maskBackground","Node","startBtn","Button","leftCount","leftbuchu","leftShowPoker","rightCount","rightShowPoker","rightbuchu","playerbuchu","playerHandCards","playerOutCards","playerAction","playerDizhuAction","dipaiShowPoker","leftTip","rightTip","playerTip","onLoad","socketAction","loadRes","setIndex","Network","socket","initNetwork","self","console","log","Global","roomNum","socketOn","loader","SpriteAtlas","err","assets","sflist","getSpriteFrames","i","length","sf","_name","startPoker","string","emit","roomIndex","shuffleArray","array","j","Math","random","temp","restartGame","playerHandCardsShow","getComponent","desTroyPokers","Array","testBtn","startShowPokers","cards","playerType","pokerDatas","pokers","loadAllPoker","pokerSprite","bubbleSortCards","showCards","startPlayer","refreshCount","startDipai","type","showPoker","showPokers","originCards","instantiate","Poker","pokerName","creatCard","_imageName","Sprite","spriteFrame","push","leftIndex","rightIndex","setTip","index","active","on","errorMes","alert","playerIndex","msg","data","parseJson","qiangdizhu","qiangdizhuResult","str","isFirst","nextIndex","dizhuNode","setFirst","dizhuIndex","pokerAllDown","mes","lastPokerType","actionNode","setBuchu","blank","pokerSprites","lastPokers","datas","start"],"mappings":"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","file":"playing.js","sourceRoot":"../../../../assets/Script","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/class.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/class/index.html\n// Learn Attribute:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/reference/attributes.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/reference/attributes/index.html\n// Learn life-cycle callbacks:\n//  - [Chinese] http://www.cocos.com/docs/creator/scripting/life-cycle-callbacks.html\n//  - [English] http://www.cocos2d-x.org/docs/editors_and_tools/creator-chapters/scripting/life-cycle-callbacks/index.html\nvar PokerObj = require(\"Poker\");\nvar pokerTypes = require('pokerTypes');\nvar PlayerType = cc.Enum({\n    left: 0,\n    right: -1,\n    player: -1,\n    dipai: -1,\n    shoupai: -1\n})\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        poker: cc.Prefab, //扑克\n        allPokers: [], //所有牌\n        // leftPokers: [], //左边牌\n        // rightPokers: [], //右边牌\n        playerPokers: [], //玩家牌\n        dipaiPokers: [], //底牌\n        leftPokersOut: [], //左边打出牌\n        rightPokersOut: [], //右边打出牌\n        playerPokersOut: [], //玩家打出牌\n        pokerSpriteFrameMap: {\n            default: {},\n            visible: false,\n        },\n        leftReady: cc.Label, //左边准备\n        rightReady: cc.Label, //右边准备\n        playerReady: cc.Label, //玩家准备\n        //控制的东西\n        maskBackground: cc.Node, //开始前的遮罩\n        startBtn: cc.Button, //开始按钮\n        leftCount: cc.Label, //左边数量\n        leftbuchu: cc.Label, //左边不出\n        leftShowPoker: cc.Node, //左边展示Poker\n        rightCount: cc.Label, //右边数量\n        rightShowPoker: cc.Node, //右边展示Poker\n        rightbuchu: cc.Label, //右边不出\n\n        playerbuchu: cc.Label, //玩家不出或不抢\n\n        playerHandCards: cc.Node, //玩家手牌\n        playerOutCards: cc.Node, //玩家出牌\n        playerAction: cc.Node, //玩家按钮\n        playerDizhuAction: cc.Node, //玩家按钮\n\n        dipaiShowPoker: cc.Node, //右边展示Poker\n\n        leftTip: cc.Node, //左边手牌了\n        rightTip: cc.Node, //右边出牌了\n        playerTip: cc.Node, //玩家出牌了\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n\n        this.socketAction();\n        this.loadRes();\n        this.setIndex();\n    },\n    /**\n     * socket处理\n     */\n    socketAction() {\n        if (Network.socket == null) {\n            //启动网络\n            Network.initNetwork();\n        }\n        let self = this;\n        // Network.socket.on('hello', function (msg) {\n        //     console.log(msg);\n        // });\n        console.log(Global.roomNum)\n        //准备开始\n        this.socketOn();\n\n    },\n    //加载卡片资源\n    loadRes() {\n\n        let self = this;\n        cc.loader.loadRes('poker', cc.SpriteAtlas, function (err, assets) {\n            console.log('====' + assets);\n\n            let sflist = assets.getSpriteFrames();\n            for (let i = 0; i < sflist.length; i++) {\n                let sf = sflist[i];\n                self.pokerSpriteFrameMap[sf._name] = sf;\n            }\n            console.log(\"获取完全部Poker\")\n        });\n\n    },\n    //测试获取Poker\n    startPoker() {\n        if (this.playerReady.string == \"已准备\") {\n            this.playerReady.string = \"请准备\"\n        } else {\n            this.playerReady.string = \"已准备\"\n        }\n\n\n        Network.socket.emit('readyGame', Global.roomNum, Global.roomIndex);\n\n    },\n    //洗牌算法\n    shuffleArray(array) {\n        for (var i = array.length - 1; i > 0; i--) {\n            // 在正数的时候相当于Math.floor()向下取整,负数的时候相当于Math.ceil()：\n            var j = (Math.random() * (i + 1)) | 0;\n            // console.log(j);\n            var temp = array[i];\n            array[i] = array[j];\n            array[j] = temp;\n        }\n        return array;\n    },\n    /**\n     * 重新发牌开始\n     */\n    restartGame() {\n\n        //清空页面的一些东西\n        let playerHandCardsShow = this.playerHandCards.getComponent('ShowPoker');\n        playerHandCardsShow.desTroyPokers(new Array());\n\n        let dipai = this.dipaiShowPoker.getComponent('ShowPoker');\n        dipai.desTroyPokers(new Array());\n\n        let left = this.leftShowPoker.getComponent('ShowPoker');\n        left.desTroyPokers(new Array());\n\n        let right = this.rightShowPoker.getComponent('ShowPoker');\n        right.desTroyPokers(new Array());\n    },\n    testBtn() {\n        Network.socket.emit('restarGame', Global.roomNum, Global.roomIndex);\n    },\n    /**\n     * 显示poker\n     * @param {数字Poker} cards \n     * @param {展示位置} playerType \n     */\n    startShowPokers(cards, playerType) {\n\n        var pokerDatas = [];\n        var pokers = this.loadAllPoker(cards);\n        for (let i = 0; i < cards.length; i++) {\n            let pokerSprite = pokers[i];\n            pokerDatas[i] = pokerSprite;\n        }\n        //左边\n        if (playerType == PlayerType.left) {\n            this.leftPokersOut = pokerDatas;\n            pokerTypes.bubbleSortCards(this.leftPokersOut);\n        } else if (playerType == PlayerType.right) {\n            this.rightPokersOut = pokerDatas;\n            pokerTypes.bubbleSortCards(this.rightPokersOut);\n        } else if (playerType == PlayerType.shoupai) {\n            this.playerPokersOut = pokerDatas;\n            pokerTypes.bubbleSortCards(this.playerPokersOut);\n        }\n        this.showCards(playerType);\n\n    },\n    //生成当前玩家\n    startPlayer(cards) {\n        this.playerPokers = [];\n        var pokers = this.loadAllPoker(cards);\n        for (let i = 0; i < cards.length; i++) {\n            let pokerSprite = pokers[i];\n            this.playerPokers[i] = pokerSprite;\n        }\n        pokerTypes.bubbleSortCards(this.playerPokers);\n        this.showCards(PlayerType.player);\n        //刷新数量\n        this.refreshCount();\n    },\n    //生成三张底牌\n    startDipai(cards) {\n        this.dipaiPokers = [];\n        var pokers = this.loadAllPoker(cards);\n        for (let i = 0; i < cards.length; i++) {\n            let pokerSprite = pokers[i];\n            this.dipaiPokers[i] = pokerSprite;\n        }\n        this.showCards(PlayerType.dipai);\n        // this.showPokers(this.dipaiPokers, PlayerType.dipai);\n    },\n    //调用子类的展示方法\n    showCards(type) {\n        if (type == PlayerType.left) {\n            var showPoker = this.leftShowPoker.getComponent('ShowPoker');\n            showPoker.showPokers(this.leftPokersOut, PlayerType.left);\n        } else if (type == PlayerType.right) {\n            var showPoker = this.rightShowPoker.getComponent('ShowPoker');\n            showPoker.showPokers(this.rightPokersOut, PlayerType.right);\n        } else if (type == PlayerType.player) {\n            var showPoker = this.playerHandCards.getComponent('ShowPoker');\n            showPoker.showPokers(this.playerPokers, PlayerType.player);\n        } else if (type == PlayerType.shoupai) {\n            //打出的牌\n            var showPoker = this.playerOutCards.getComponent('ShowPoker');\n            showPoker.showPokers(this.playerPokersOut, PlayerType.shoupai);\n        } else {\n            var showPoker = this.dipaiShowPoker.getComponent('ShowPoker');\n            showPoker.showPokers(this.dipaiPokers, PlayerType.dipai);\n        }\n    },\n\n    loadAllPoker(originCards) {\n\n        var pokers = [];\n        for (let i = 0; i < originCards.length; i++) {\n\n            let pokerSprite = cc.instantiate(this.poker);\n            var Poker = pokerSprite.getComponent('Poker');\n            var pokerName = Poker.creatCard(originCards[i])._imageName;\n            // console.log(\"名称\" + pokerName);\n            pokerSprite.getComponent(cc.Sprite).spriteFrame = this.pokerSpriteFrameMap[pokerName];\n\n            pokers.push(pokerSprite);\n        }\n        return pokers;\n    },\n\n    //刷新显示数量\n    refreshCount() {\n        var self = this;\n        Network.socket.emit('refreshCardsCount', Global.roomNum);\n\n    },\n    //设置Index\n    setIndex() {\n        if (Global.roomIndex == 0) {\n            this.leftIndex = 2;\n            this.rightIndex = 1;\n        } else if (Global.roomIndex == 1) {\n            this.leftIndex = 0;\n            this.rightIndex = 2;\n        } else {\n            this.leftIndex = 1;\n            this.rightIndex = 0;\n        }\n    },\n    //设置提示的显示\n    setTip(index) {\n        this.leftTip.active = (index == this.leftIndex);\n        this.rightTip.active = (index == this.rightIndex);\n        this.playerTip.active = (index == Global.roomIndex);\n    },\n    /**\n     * socket接收处理\n     */\n    socketOn() {\n        var self = this;\n        Network.socket.on(\"readyGame\" + Global.roomNum, function (roomIndex) {\n            if (roomIndex == self.leftIndex) {\n                self.leftReady.string = \"准备\";\n            } else if (roomIndex == self.rightIndex) {\n                self.rightReady.string = \"准备\";\n            } else {\n\n            }\n        });\n        //错误信息\n        Network.socket.on('errorPlay', function (errorMes) {\n            alert(errorMes);\n        });\n        //获取所有Poker\n        Network.socket.on('startGame' + Global.roomNum, function (playerIndex) {\n            self.restartGame();\n            //隐藏控件\n            self.maskBackground.active = false;\n\n            self.leftbuchu.string = \"\";\n\n            self.rightbuchu.string = \"\";\n\n            self.playerbuchu.string = \"\";\n\n            self.playerAction.active = false;\n\n            self.playerDizhuAction.active = false;\n\n            if (playerIndex == Global.roomIndex) {\n\n                self.playerDizhuAction.active = true;\n            }\n            //当前操作对象\n            self.setTip(playerIndex);\n\n            Network.socket.emit('getCards', Global.roomNum, Global.roomIndex);\n            Network.socket.on('getCardsBack' + Global.roomNum, function (cards) {\n                console.log(cards);\n                self.startPlayer(cards);\n            });\n            Network.socket.on('getDipaiCardsBack' + Global.roomNum, function (cards) {\n                console.log(cards);\n                self.startDipai(cards);\n            });\n        });\n        //有人抢地主\n        Network.socket.on('qiangdizhuResult', function (msg) {\n\n            console.log(msg);\n            let data = Network.parseJson(msg);\n            let playerIndex = data.index;\n            let qiangdizhu = data.qiangdizhuResult;\n            let str = data.str;\n\n            if (playerIndex == self.leftIndex) {\n                self.leftbuchu.string = str;\n            } else if (playerIndex == self.rightIndex) {\n                self.rightbuchu.string = str;\n            } else {\n                self.playerbuchu.string = str;\n            }\n\n        });\n        //目前抢地主用户\n        Network.socket.on('qiangdizhuNotice', function (msg) {\n            let data = Network.parseJson(msg);\n            let isFirst = data.isFirst;\n            //当前操作对象\n            self.setTip(data.nextIndex);\n\n            if (data.nextIndex == Global.roomIndex) {\n                self.playerDizhuAction.active = true;\n                self.playerbuchu.string = \"\";\n            } else {\n                self.playerDizhuAction.active = false;\n            }\n            //叫地主和抢地主\n            if (isFirst) {\n                let dizhuNode = self.playerDizhuAction.getComponent('playerDizhuAction');\n                dizhuNode.setFirst(true);\n            } else {\n                let dizhuNode = self.playerDizhuAction.getComponent('playerDizhuAction');\n                dizhuNode.setFirst(false);\n            }\n\n        });\n        //开始出牌\n        Network.socket.on('startPlayerPoker', function (playerIndex) {\n            console.log(\"地主为:\"+playerIndex);\n            //存储地主人员\n            Global.dizhuIndex = playerIndex;\n\n            self.playerDizhuAction.active = false;\n            self.leftbuchu.string = \"\";\n            self.rightbuchu.string = \"\";\n            self.playerbuchu.string = \"\";\n            //当前操作对象\n            self.setTip(playerIndex);\n            //展示底牌\n            Network.socket.emit('getCards', Global.roomNum, 3);\n            if (playerIndex == self.leftIndex) {\n                self.leftbuchu.string = \"出牌\";\n                self.refreshCount()\n            } else if (playerIndex == self.rightIndex) {\n                self.rightbuchu.string = \"出牌\";\n                self.refreshCount()\n            } else {\n                self.playerAction.active = true;\n                Network.socket.emit('getCards', Global.roomNum, Global.roomIndex);\n                //重置poker\n                var showPoker = self.playerHandCards.getComponent('ShowPoker');\n                showPoker.pokerAllDown();\n            }\n        });\n\n        Network.socket.on('playeAction', function (mes) {\n            let data = Network.parseJson(mes);\n\n            let playerIndex = data.nextIndex;\n            let isFirst = data.isFirst;\n            Global.isFirst = isFirst;\n            Global.lastPokerType = data.lastPokerType;\n\n            let actionNode = self.playerAction.getComponent('playerAction');\n            actionNode.setBuchu(isFirst);\n\n            //当前操作对象\n            self.setTip(playerIndex);\n            if (playerIndex == Global.roomIndex) {\n                self.playerbuchu.string = \"\";\n                self.playerAction.active = true;\n                let blank = new Array();\n                self.startShowPokers(blank, PlayerType.shoupai);\n            }\n\n        });\n        //不出\n        Network.socket.on('buchu', function (playerIndex) {\n            let blank = new Array();\n            if (playerIndex == self.leftIndex) {\n                self.leftbuchu.string = \"不出\";\n\n                self.startShowPokers(blank, PlayerType.left);\n            } else if (playerIndex == self.rightIndex) {\n                self.rightbuchu.string = \"不出\";\n                self.startShowPokers(blank, PlayerType.right);\n            } else {\n                self.playerAction.active = false;\n                self.playerbuchu.string = \"不出\"\n                self.startShowPokers(blank, PlayerType.shoupai);\n                //重置poker\n                var showPoker = self.playerHandCards.getComponent('ShowPoker');\n                showPoker.pokerAllDown();\n            }\n        });\n        //出牌\n        Network.socket.on('chupai', function (mes) {\n            let data = Network.parseJson(mes);\n            let playerIndex = data.playerIndex;\n            let pokers = data.pokers;\n\n            //存储上一手牌\n            var pokerSprites = self.loadAllPoker(pokers);\n            Global.lastPokers = pokerSprites;\n\n            if (playerIndex == self.leftIndex) {\n                self.leftbuchu.string = \"\";\n                self.refreshCount()\n                //出的牌\n                self.startShowPokers(pokers, PlayerType.left);\n            } else if (playerIndex == self.rightIndex) {\n                self.rightbuchu.string = \"\";\n                self.refreshCount()\n                //出的牌\n                self.startShowPokers(pokers, PlayerType.right);\n            } else {\n                self.playerAction.active = false;\n                //手牌\n                Network.socket.emit('getCards', Global.roomNum, Global.roomIndex);\n                //出的牌\n                self.startShowPokers(pokers, PlayerType.shoupai);\n                //重置poker\n                var showPoker = self.playerHandCards.getComponent('ShowPoker');\n                showPoker.pokerAllDown();\n            }\n        });\n        Network.socket.on('gameOver', function (playerIndex) {\n            if (playerIndex == Global.dizhuIndex) {\n                console.log(\"地主胜利\")\n                //我是地主\n                if(Global.dizhuIndex == Global.playerIndex){\n                    console.log(\"我赢了\")\n                }else{\n                    console.log(\"我输了\")\n                }\n            }else{\n                console.log(\"农民胜利\")\n                //我是地主\n                if(Global.dizhuIndex == Global.playerIndex){\n                    console.log(\"我输了\")\n                }else{\n                    console.log(\"我赢了\")\n                }\n            }\n\n        });\n        Network.socket.on('refreshCardsCountBack' + Global.roomNum, function (datas) {\n            console.log(datas);\n            self.leftCount.string = \"\" + datas[self.leftIndex];\n            self.rightCount.string = \"\" + datas[self.rightIndex];\n        });\n    },\n    start() {\n\n    },\n\n    // update (dt) {\n\n    // },\n});"]}